<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Automaton-Js Documentation - Websocket Related Functions</title><link rel="stylesheet" type="text/css" href="/automaton-js/css/fontawesome.min.css"/><link rel="stylesheet" type="text/css" href="/automaton-js/css/brands.min.css"/><link rel="stylesheet" type="text/css" href="/automaton-js/css/solid.min.css"/><link rel="stylesheet" type="text/css" href="/automaton-js/css/bootstrap-automaton-condensed.min.css"/><meta name="next-head-count" content="8"/><link rel="preload" href="/automaton-js/_next/static/css/475d436e3bcf48d20e2a.css" as="style"/><link rel="stylesheet" href="/automaton-js/_next/static/css/475d436e3bcf48d20e2a.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/automaton-js/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/automaton-js/_next/static/chunks/framework.4b81eedf2fcdb09bf521.js" as="script"/><link rel="preload" href="/automaton-js/_next/static/chunks/commons.cd96d4983e829a7e79a0.js" as="script"/><link rel="preload" href="/automaton-js/_next/static/chunks/main-20907b484249638f301b.js" as="script"/><link rel="preload" href="/automaton-js/_next/static/chunks/pages/_app-cc0c2dc6944ba668189e.js" as="script"/><link rel="preload" href="/automaton-js/_next/static/chunks/39b4fb4d275055bb84513a65db65e747b75d5179.a9f4e9f0ead14011af34.js" as="script"/><link rel="preload" href="/automaton-js/_next/static/chunks/pages/websocket-9e3e47815d4d1c69f7dd.js" as="script"/></head><body><div id="__next"><div class="container"><header><nav class="navbar navbar-dark bg-primary"><a class="navbar-brand text-white" href="/automaton-js/"><i class="fab fa-quinscape"></i> Automaton-Js</a></nav></header><main class="row"><div class="col-9 mt-3"><div class="container"><div class="row"><div class="col"><h1>Websocket Related Functions</h1><section id="Hub" class="mb-5"><h2><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 23.283 28.046" class="icon mr-2"><g transform="translate(-76.748 -118.545)"><rect style="marker:none" width="19.198" height="22.348" x="76.756" y="122.895" rx="2.646" ry="2.646" color="#000" overflow="visible" fill="#ff25e9" fill-opacity="0.499" fill-rule="evenodd"></rect><path d="M86.286 138.996a6.114 6.114 0 011.837-3.662 32 32 0 01-.948.04 29.54 29.54 0 01-1.883 0c-2.648-.073-4.759-.447-6.278-.98-.715-.24-1.326-.524-1.798-.849v3.391c1.026 1.072 4.47 2.06 9.018 2.06h.052zM85.382 134.254c.117.003.235.007.354.008a27.382 27.382 0 001.352-.008l.126-.003c4.06-.13 7.088-1.052 8.04-2.045v-3.391c-1.757 1.206-5.468 1.844-9.02 1.844-3.55 0-7.262-.638-9.018-1.844V132.206c.951.993 3.98 1.915 8.04 2.045l.126.003z" style="font-variation-settings:normal" fill="#375a7f"></path><path d="M95.253 127.523V126.69c0-.06-.02-.115-.049-.165-.404-1.552-3.517-3.082-8.97-3.082-5.439 0-8.548 1.522-8.965 3.07a.35.35 0 00-.053.177V127.523c1.023 1.068 4.443 2.054 9.019 2.054 4.575 0 7.995-.986 9.018-2.054z" fill="#375a7f"></path><path d="M86.253 140.11h-.019c-4.453 0-7.527-.825-9.018-1.876v2.959a.34.34 0 00.042.163c.426 1.765 4.238 3.084 8.976 3.084.722 0 1.418-.034 2.088-.092a6.113 6.113 0 01-2.07-4.237z" style="font-variation-settings:normal" fill="#375a7f"></path><path style="line-height:125%;-inkscape-font-specification:&#x27;LatoLatin, Medium Italic&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center" d="M84.13 131.555c-.276 0-.548.065-.793.177a.802.802 0 00-.012.004c-.23.11-.437.268-.61.448-.179.18-.328.398-.433.636a.802.802 0 00-.006.014c-.104.25-.156.52-.156.787 0 .268.053.538.152.785a.802.802 0 00.016.036c.1.218.231.423.393.603a.802.802 0 00.03.031c.178.177.385.323.604.428a.802.802 0 00.026.012 1.943 1.943 0 001.537.004.802.802 0 00.025-.012 2.155 2.155 0 001.063-1.06 1.942 1.942 0 00.015-1.643 2.127 2.127 0 00-.43-.63c-.18-.187-.4-.341-.642-.444a1.912 1.912 0 00-.78-.176zm9.23.12c-.744 0-1.466.1-2.156.296a.802.802 0 00-.002 0 7.34 7.34 0 00-1.902.845l-.004.002-.002.002a7.622 7.622 0 00-1.594 1.323 7.943 7.943 0 00-1.207 1.738 9.076 9.076 0 00-.76 2.082 10.044 10.044 0 00-.265 2.334c0 .933.139 1.814.42 2.629a.802.802 0 000 .002c.28.806.692 1.525 1.234 2.133a5.836 5.836 0 001.961 1.43.802.802 0 00.008.003c.78.343 1.647.508 2.576.508.581 0 1.132-.126 1.684-.246l1.48 2.07a.802.802 0 00.027.037c.206.255.487.465.803.58.284.11.585.159.897.159h1.552a.802.802 0 00.647-1.278l-2.268-3.082c.304-.249.631-.47.897-.767l.002-.002a7.706 7.706 0 001.177-1.73c.323-.633.57-1.316.739-2.04a10.2 10.2 0 00.254-2.304 8.02 8.02 0 00-.418-2.627 6.255 6.255 0 00-1.235-2.143 5.653 5.653 0 00-1.976-1.434c-.78-.349-1.644-.52-2.569-.52zm-.234 3.216c.47 0 .856.081 1.19.234a.802.802 0 00.003.002c.35.158.624.37.86.656a.802.802 0 00.006.006c.244.292.439.652.58 1.102.14.446.214.961.214 1.555 0 .867-.109 1.635-.318 2.306-.21.671-.502 1.22-.867 1.668-.36.443-.778.775-1.28 1.018-.482.23-1.019.35-1.642.35-.47 0-.857-.082-1.19-.235a2.46 2.46 0 01-.867-.656c-.236-.291-.429-.65-.57-1.098l-.002-.002a5.396 5.396 0 01-.205-1.555c0-.867.11-1.63.318-2.295.218-.68.51-1.235.87-1.683.36-.45.773-.779 1.263-1.014a.802.802 0 00.008-.002 3.617 3.617 0 011.629-.357zm-10.193.863a.802.802 0 00-.797.707l-1.14 9.502a.802.802 0 00.796.898h1.795a.802.802 0 00.797-.707l1.15-9.502a.802.802 0 00-.797-.898z" font-style="italic" font-weight="500" font-size="18.704" font-family="LatoLatin" letter-spacing="0" word-spacing="0" text-anchor="middle" fill="#00bc8c"></path></g></svg>Hub<a class="btn btn-link section-link text-muted" href="#Hub"><i class="fas fa-link"></i></a></h2><p class="">Low-level websocket handler for automaton.

Before you use this, make sure you actually want to and not the more convenient pubsub implemented on top of this.</p><h3>.register(type, fn)</h3><p class="">Registers a handler for the given message type.</p><h4>Parameters</h4><table class="table table-bordered table-hover"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td>String</td><td>message type</td></tr><tr><td>fn</td><td>function</td><td>callback that will receive the message payload</td></tr></tbody></table><h4>Return Value</h4>Type: <!-- -->() =&gt; void<p class="">unregister function</p><pre></pre><h3>.send(type, payload)</h3><p class="">Sends a message via websocket.</p><h4>Parameters</h4><table class="table table-bordered table-hover"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td>String</td><td>message type</td></tr><tr><td>payload</td><td>object</td><td>message payload</td></tr></tbody></table><h4>Return Value</h4>Type: <!-- -->number<p class="">message id</p><pre></pre><h3>.request(type, payload)</h3><p class="">Initiate a request/response over websocket.

The server has to react to the message received by sending a Response message referencing the message id of the
message.</p><h4>Parameters</h4><table class="table table-bordered table-hover"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td>String</td><td>message type</td></tr><tr><td>payload</td><td>---<!-- -->---</td><td>message payload</td></tr></tbody></table><h4>Return Value</h4>Type: <!-- -->Promise&lt;unknown&gt;<p class="text-muted">No description</p><pre></pre><h3>.init(cid)</h3><p class="">Initializes the Hub with the prepared connection id for the client.</p><h4>Parameters</h4><table class="table table-bordered table-hover"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cid</td><td>String</td><td>connection id</td></tr></tbody></table><h4>Return Value</h4>Type: <!-- -->Promise&lt;String&gt;<p class="">resolves with the connection id after the websocket connection is established.</p><pre></pre><h3>.getConnectionId()</h3><p class="">Returns the current connection id.</p><h4>Return Value</h4>Type: <!-- -->String<p class="">connection id</p><pre></pre><hr/></section><section id="publish" class="mb-5"><h3>publish(topic, message)<a class="btn btn-link section-link text-muted" href="#publish"><i class="fas fa-link"></i></a></h3><p class="">Publishes the given message payload for the given topic</p><h4>Parameters</h4><table class="table table-bordered table-hover"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td>String</td><td>topic name</td></tr><tr><td>message</td><td>object</td><td>message payload</td></tr></tbody></table><pre></pre><hr/></section><section id="subscribeToTopic" class="mb-5"><h3>subscribeToTopic(topic, handler)<a class="btn btn-link section-link text-muted" href="#subscribeToTopic"><i class="fas fa-link"></i></a></h3><p class="">Subscribes the given message handler to the given topic. Returns an unsubscribe function.</p><h4>Parameters</h4><table class="table table-bordered table-hover"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td>String</td><td>topic name</td></tr><tr><td>handler</td><td>Function</td><td>message handler function. Receives the (filtered) messages for the given topic.</td></tr></tbody></table><pre></pre><hr/></section></div></div></div></div><div class="col-3"><div class="mt-5 sidebar"><h5>Websocket Related Functions</h5><ul class="markdown-doc list-unstyled"><li><a class="btn btn-link toc-link text-muted" href="#Hub">Hub</a><br/></li><li><a class="btn btn-link toc-link text-muted" href="#publish">publish</a><br/></li><li><a class="btn btn-link toc-link text-muted" href="#subscribeToTopic">subscribeToTopic</a><br/></li></ul></div></div></main><footer class="row"><div class="col"><hr/></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Websocket Related Functions","docs":{"handwritten":[],"docs":{"Hub":{"name":"Hub","source":"src/message/Hub.js","description":{"description":"Low-level websocket handler for automaton.\n\nBefore you use this, make sure you actually want to and not the more convenient pubsub implemented on top of this.","tags":[{"title":"category","description":"websocket"}]},"group":"UTIL","reactDocGen":null,"start":124,"end":235,"members":[{"type":"FunctionExpression","name":"register","description":{"description":"Registers a handler for the given message type.","tags":[{"title":"param","description":"message type","type":{"type":"NameExpression","name":"String"},"name":"type"},{"title":"param","description":"callback that will receive the message payload","type":{"type":"NameExpression","name":"function"},"name":"fn"},{"title":"return","description":"unregister function","type":{"type":"FunctionType","params":[],"result":{"type":"VoidLiteral"}}}]}},{"type":"FunctionExpression","name":"send","description":{"description":"Sends a message via websocket.","tags":[{"title":"param","description":"message type","type":{"type":"NameExpression","name":"String"},"name":"type"},{"title":"param","description":"message payload","type":{"type":"NameExpression","name":"object"},"name":"payload"},{"title":"return","description":"message id","type":{"type":"NameExpression","name":"number"}}]}},{"type":"FunctionExpression","name":"request","description":{"description":"Initiate a request/response over websocket.\n\nThe server has to react to the message received by sending a Response message referencing the message id of the\nmessage.","tags":[{"title":"see","description":"de.quinscape.automaton.runtime.ws.DefaultAutomatonClientConnection.respond"},{"title":"param","description":"message type","type":{"type":"NameExpression","name":"String"},"name":"type"},{"title":"param","description":"message payload","type":null,"name":"payload"},{"title":"return","description":null,"type":{"type":"TypeApplication","expression":{"type":"NameExpression","name":"Promise"},"applications":[{"type":"NameExpression","name":"unknown"}]}}]}},{"type":"FunctionExpression","name":"init","description":{"description":"Initializes the Hub with the prepared connection id for the client.","tags":[{"title":"param","description":"connection id","type":{"type":"NameExpression","name":"String"},"name":"cid"},{"title":"return","description":"resolves with the connection id after the websocket connection is established.","type":{"type":"TypeApplication","expression":{"type":"NameExpression","name":"Promise"},"applications":[{"type":"NameExpression","name":"String"}]}}]}},{"type":"FunctionExpression","name":"getConnectionId","description":{"description":"Returns the current connection id.","tags":[{"title":"return","description":"connection id","type":{"type":"NameExpression","name":"String"}}]}}],"category":"websocket","link":"websocket#Hub"},"publish":{"name":"publish","source":"src/message/publish.js","description":{"description":"Publishes the given message payload for the given topic","tags":[{"title":"category","description":"websocket"},{"title":"param","description":"topic name","type":{"type":"NameExpression","name":"String"},"name":"topic"},{"title":"param","description":"message payload","type":{"type":"NameExpression","name":"object"},"name":"message"}]},"group":"FUNCTION","reactDocGen":null,"start":12,"end":19,"category":"websocket","link":"websocket#publish"},"subscribeToTopic":{"name":"subscribeToTopic","source":"src/message/subscribeToTopic.js","description":{"description":"Subscribes the given message handler to the given topic. Returns an unsubscribe function.","tags":[{"title":"category","description":"websocket"},{"title":"param","description":"topic name","type":{"type":"NameExpression","name":"String"},"name":"topic"},{"title":"param","description":"message handler function. Receives the (filtered) messages for the given topic.","type":{"type":"NameExpression","name":"Function"},"name":"handler"}]},"group":"FUNCTION","reactDocGen":null,"start":48,"end":77,"category":"websocket","link":"websocket#subscribeToTopic"}},"utils":["Hub"],"functions":["publish","subscribeToTopic"]}},"__N_SSG":true},"page":"/websocket","query":{},"buildId":"Zklz5rx62l6lAejnWa6ON","assetPrefix":"/automaton-js","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/automaton-js/_next/static/chunks/polyfills-462676b8e60afb64d330.js"></script><script src="/automaton-js/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/automaton-js/_next/static/chunks/framework.4b81eedf2fcdb09bf521.js" async=""></script><script src="/automaton-js/_next/static/chunks/commons.cd96d4983e829a7e79a0.js" async=""></script><script src="/automaton-js/_next/static/chunks/main-20907b484249638f301b.js" async=""></script><script src="/automaton-js/_next/static/chunks/pages/_app-cc0c2dc6944ba668189e.js" async=""></script><script src="/automaton-js/_next/static/chunks/39b4fb4d275055bb84513a65db65e747b75d5179.a9f4e9f0ead14011af34.js" async=""></script><script src="/automaton-js/_next/static/chunks/pages/websocket-9e3e47815d4d1c69f7dd.js" async=""></script><script src="/automaton-js/_next/static/Zklz5rx62l6lAejnWa6ON/_buildManifest.js" async=""></script><script src="/automaton-js/_next/static/Zklz5rx62l6lAejnWa6ON/_ssgManifest.js" async=""></script></body></html>